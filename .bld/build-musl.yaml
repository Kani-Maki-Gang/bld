name: Bld build pipeline for musl
runs_on: bld-musl-builder
version: 1

variables:
  branch: master

steps:
- name: Clone repository
  working_dir: /usr/src
  exec:
    - git clone -b bld:var:branch https://github.com/kostas-vl/bld.git

- name: Build project
  working_dir: /usr/src/bld
  exec:
  - cargo build --release --target x86_64-unknown-linux-musl

artifacts:
- method: get
  from: /usr/src/bld/target/x86_64-unknown-linux-musl/release/bld
  to: ./musl/dist
  after: Build project
